<ngx-masonry [options]="options" [ordered]="true"
             infiniteScroll
             [infiniteScrollDistance]="0"
             (scrolled)="scrolled()"
             [fromRoot]="true"
             [infiniteScrollContainer]="'.app-body-container'"
             [scrollWindow]="false">
    <ng-container *ngIf="images.length != 0">
        <div ngxMasonryItem *ngFor="let image of images"
             class="shared-image-box-shadow image-container masonry-item-width"
             (click)="openImageViewDialog(image)">
            <img class="masonry-item-width" style="margin-bottom: -6px;"
                 [src]="image.imgB64 | sanitizeImage" alt="X">
            <div class="image-hover-data">
                <div style="position: absolute;bottom: 5px;left: 10px;color: white;z-index: 10;"
                     (click)="onUserClickEvent($event)">
                    <mat-icon
                        style="color: greenyellow;vertical-align: middle;font-size: 40px;width: fit-content;height: fit-content;margin-right: 8px">
                        account_circle
                    </mat-icon>
                    <span style="vertical-align: middle;">{{image.name | getNoExtensionName}}</span>
                </div>
                <div style="bottom: 5px;right: 5px" class="image-container-icon-button">
                    <button mat-icon-button (click)="onDownloadButtonClick($event,image)">
                        <mat-icon>download</mat-icon>
                    </button>
                </div>
                <div style="top: 5px;right: 5px;" class="image-container-icon-button">
                    <button mat-icon-button (click)="onFavouriteClickEvent($event,image)">
                        <!--                        TODO should replace [0] with something better-->
                        <mat-icon
                            *ngIf="!userCollections[0].imageIds.includes(image.id)">
                            star_border
                        </mat-icon>
                        <mat-icon
                            *ngIf="userCollections[0].imageIds.includes(image.id)">star
                        </mat-icon>
                    </button>
                </div>
                <div style="top: 5px;right: 45px;" class="image-container-icon-button">
                    <button mat-icon-button (click)="onAddToCollectionClickEvent($event,image)">
                        <mat-icon>add_to_photos</mat-icon>
                    </button>
                </div>
            </div>
        </div>
    </ng-container>
    <!--        maybe only hide it if all imgs is loaded-->

    <!--    <ng-container *ngIf="loading">-->
    <!--        <div ngxMasonryItem class="skeleton-image-div pulse rounded" *ngFor="let height of skeletonHeights"-->
    <!--             [style.height.vh]="height">-->
    <!--            <div style="height: 100%;width: 100%" class="pulse rounded"></div>-->
    <!--        </div>-->
    <!--    </ng-container>-->

</ngx-masonry>
