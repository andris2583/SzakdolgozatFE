<div
    id="tag-name">{{tagName == 'all' ? '' : tagName}}</div>
<div id="filter-sort-container">
    <button #filterTabButton class="filter-sort-button" (click)="filterButtonClicked()" mat-raised-button>
        Filter
        <mat-icon>{{filterTabOpen ? 'keyboard_arrow_up' : 'keyboard_arrow_down'}}</mat-icon>

    </button>
    <div #filterTab id="filter-tab" *ngIf="filterTabOpen">
        <button mat-button class="filter-button">Some complicated</button>
        <br>
        <button mat-button class="filter-button">filter options</button>
    </div>
    <button #sortTabButton class="filter-sort-button" (click)="sortButtonClicked()" mat-raised-button>
        {{getOrderByTypeString(batchImageRequest.requestOrderByType)}}
        <mat-icon>{{sortTabOpen ? 'keyboard_arrow_up' : 'keyboard_arrow_down'}}</mat-icon>
    </button>
    <div #sortTab id="sort-tab" *ngIf="sortTabOpen">
        <button (click)="selectOrderByType(orderByTypes.ALPHABETICAL)" mat-button
                class="sort-button">
            Alphabetical
            <mat-icon>sort_by_alpha</mat-icon>
        </button>
        <br>
        <button (click)="selectOrderByType(orderByTypes.POPULAR)" mat-button class="sort-button">
            Popularity
            <mat-icon>trending_up</mat-icon>
        </button>
        <br>
        <button (click)="selectOrderByType(orderByTypes.TIME)" mat-button class="sort-button">
            Upload date
            <mat-icon>access_time</mat-icon>
        </button>
    </div>
</div>
<ngx-masonry [options]="options" [ordered]="true"
             infiniteScroll
             [infiniteScrollDistance]="0"
             (scrolled)="loadImageData()"
             [fromRoot]="true"
             [infiniteScrollContainer]="'.app-body-container'"
             [scrollWindow]="false">
    <ng-container *ngIf="images.length != 0">
        <div ngxMasonryItem *ngFor="let image of images" class="image-container masonry-item-width"
             (click)="openImageViewDialog(image)">
            <img class="masonry-item-width" style="margin-bottom: -6px;"
                 [src]="image.imgB64 | sanitizeImage" alt="X">
            <div class="image-hover-data">
                <div style="position: absolute;bottom: 5px;left: 10px;color: white;z-index: 10;"
                     (click)="onUserClickEvent($event)">
                    <mat-icon
                        style="color: greenyellow;vertical-align: middle;font-size: 40px;width: fit-content;height: fit-content;margin-right: 8px">
                        account_circle
                    </mat-icon>
                    <span style="vertical-align: middle;">{{image.name | getNoExtensionName}}</span>
                </div>
                <div style="bottom: 5px;right: 5px" class="image-container-icon-button">
                    <button mat-icon-button (click)="onDownloadButtonClick($event)">
                        <mat-icon>download</mat-icon>
                    </button>
                </div>
                <div style="top: 5px;right: 5px;" class="image-container-icon-button">
                    <button mat-icon-button (click)="onFavouriteClickEvent($event)">
                        <mat-icon>star_border</mat-icon>
                    </button>
                </div>
                <div style="top: 5px;right: 45px;" class="image-container-icon-button">
                    <button mat-icon-button (click)="onAddToCollectionClickEvent($event)">
                        <mat-icon>add_to_photos</mat-icon>
                    </button>
                </div>
            </div>
        </div>
    </ng-container>
    <!--        maybe only hide it if all imgs is loaded-->

    <!--    <ng-container *ngIf="loading">-->
    <!--        <div ngxMasonryItem class="skeleton-image-div pulse rounded" *ngFor="let height of skeletonHeights"-->
    <!--             [style.height.vh]="height">-->
    <!--            <div style="height: 100%;width: 100%" class="pulse rounded"></div>-->
    <!--        </div>-->
    <!--    </ng-container>-->

</ngx-masonry>

<a mat-fab color="primary" class="open-upload-dialog-button" (click)="openImageUploadDialog()">+</a>

